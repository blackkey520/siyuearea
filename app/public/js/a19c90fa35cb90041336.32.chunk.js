webpackJsonp([32],{1838:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,l,d,u,o=a(794),i=r(o),m=a(247),s=r(m),c=a(124),p=r(c),f=a(42),h=r(f),y=a(192),b=r(y),g=a(1),v=r(g),E=a(184),k=r(E),x=a(2),I=r(x),_=a(6),C=r(_),D=a(4),S=r(D),T=a(3),M=r(T),w=a(241),R=r(w);a(795),a(383),a(151),a(125),a(248),a(150);var j=a(0),Y=r(j),z=a(238),B=(a(56),a(8)),P=r(B),L=a(123),O=a(1901),J=R.default.Search,K=(n=(0,z.connect)(function(e){var t=e.member,a=e.loading;return{memberlist:t.memberlist,memberloading:a.effects["member/getmemberlist"],pagination:t.pagination}}))((u=d=function(e){function t(e,a){(0,I.default)(this,t);var r=(0,S.default)(this,(t.__proto__||(0,k.default)(t)).call(this,e,a));return r.state={record:null},r}return(0,M.default)(t,e),(0,C.default)(t,[{key:"componentDidMount",value:function(){this.loadTableData()}},{key:"loadTableData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""!==a?this.props.dispatch({type:"member/getmemberlist",payload:{page:e,pageSize:t,membercode:a}}):this.props.dispatch({type:"member/getmemberlist",payload:{page:e,pageSize:t}})}},{key:"tableChange",value:function(e){this.loadTableData(e.current,e.pageSize)}},{key:"render",value:function(){var e=this,t=(0,v.default)({showTotal:function(e){return"共"+e+"条数据"}},this.props.pagination),a=[{title:"会员名称",dataIndex:"mname",render:function(e){return Y.default.createElement("a",{href:"javascript:;"},e)}},{title:"联系方式",dataIndex:"phonenum"},{title:"生效时间",dataIndex:"mregisttime",render:function(e){return Y.default.createElement("span",null,(0,P.default)(e).format("YYYY-MM-DD"))}},{title:"会员状态",dataIndex:"mstate",render:function(e){return Y.default.createElement("span",null,O.mstate[e])}},{title:"会员类型",dataIndex:"mtype",render:function(e){return Y.default.createElement("span",null,O.mtype[e])}},{title:"优惠卡",render:function(e,t,a){var r=(0,P.default)(t.etime).diff((0,P.default)(),"days",!1);return null!==t.pcname?Y.default.createElement("div",null,t.pcname,"(",r>0?Y.default.createElement("span",{style:{color:"red"}},"剩余",r,"天"):Y.default.createElement("span",{style:{color:"red"}},"过期"),")"):Y.default.createElement("div",null,"无")}},{title:"卡内余额",dataIndex:"mmoney"},{title:"操作",render:function(t,a,r){var n=Y.default.createElement(b.default,{record:a,onClick:function(t){"1"===t.key?e.props.dispatch(L.routerRedux.push({pathname:"/memberlist/recharge/"+e.state.record.mid})):"2"===t.key?e.props.dispatch(L.routerRedux.push({pathname:"/memberlist/edit/"+e.state.record.mid})):"3"===t.key?e.props.dispatch(L.routerRedux.push({pathname:"/memberlist/orderrecord/"+e.state.record.mid})):"4"===t.key&&e.props.dispatch(L.routerRedux.push({pathname:"/memberlist/userecord/"+e.state.record.mid}))}},Y.default.createElement(b.default.Item,{key:"1"},"充值/开卡"),Y.default.createElement(b.default.Item,{key:"2"},"编辑"),Y.default.createElement(b.default.Item,{key:"3"},"预定记录"),Y.default.createElement(b.default.Item,{key:"4"},"使用记录"));return Y.default.createElement(s.default,{onVisibleChange:function(){e.setState({record:a})},overlay:n},Y.default.createElement(p.default,{style:{marginLeft:8}},"操作 ",Y.default.createElement(h.default,{type:"down"})))}}];return Y.default.createElement("div",{className:"content-inner"},Y.default.createElement("div",{style:{paddingBottom:10,marginBottom:20,borderBottom:"1px solid #ddd"}},Y.default.createElement(J,{placeholder:"请输入会员编号",onSearch:function(t){e.loadTableData(1,10,t)},style:{width:200}}),Y.default.createElement(p.default,{onClick:function(){e.props.dispatch(L.routerRedux.push({pathname:"/memberlist/create"}))},style:{marginLeft:10}},"新增会员")),Y.default.createElement(i.default,{columns:a,pagination:t,dataSource:this.props.memberlist,rowKey:"mid",loading:this.props.memberloading,bordered:!0,onChange:this.tableChange.bind(this)}))}}]),t}(j.Component),d.contextTypes={router:j.PropTypes.object},l=u))||l;t.default=K,e.exports=t.default},1901:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mtype=["储值用户","日卡会员","周卡会员","月卡会员","季卡会员"],t.mstate=["正常","欠费","停用"],t.ostate=["预定","正在使用","使用完成","过期"],t.astate=["收入","消费"],t.atype=["普通","充值","办卡","优惠卡"]}});